<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	template="/WEB-INF/templates/template.xhtml">

	<ui:define name="content">

		<div class="content-wrapper">
			<!-- Content Header (Page header) -->
			<section class="content-header">
				<h1>
					<p:outputLabel value="#{messages['pessoaJuridica.menu.title']}" />
					<small><p:outputLabel value="#{messages['pessoaJuridica.menu.subtitle']}" /></small>
				</h1>
				<ol class="breadcrumb">
					<li><a href="#"><i class="fa fa-dashboard"></i> <p:outputLabel
								value="#{messages['breadcrumb-1']}" /></a></li>
					<li class="active"><p:outputLabel value="#{messages['user']}" /></li>
				</ol>
			</section>

			<!-- Main content -->
			<section class="content">
				<p:messages id="msgs" showDetail="false" autoUpdate="true"
					closable="true" />

				<h:panelGroup id="user-content">
					<!-- Default box -->
					<div class="box">
						<div class="box-header with-border">
							<h3 class="box-title">
								<p:outputLabel value="#{messages['user']}" />
							</h3>

							<div class="box-tools pull-right">
								<button type="button" class="btn btn-box-tool"
									data-widget="collapse" data-toggle="tooltip" title="Collapse">
									<i class="fa fa-minus"></i>
								</button>
								<button type="button" class="btn btn-box-tool"
									data-widget="remove" data-toggle="tooltip" title="Remove">
									<i class="fa fa-times"></i>
								</button>
							</div>
						</div>



						<div class="box-body" id="form-pessoaJuridica">

							<h:inputHidden
								value="#{gerenciarPessoaJuridicaMB.pessoaJuridica.id}"
								id="hiddenId" />

							<div class="form-group">
								<p:outputLabel for="nome"
									value="#{messages['pessoaJuridica.nome']}" />
								<p:inputText id="nome" styleClass="form-control"
									value="#{gerenciarPessoaJuridicaMB.pessoaJuridica.nome}"
									required="true" />
								<!-- <p:message for="nome" /> -->
							</div>

							<div class="form-group">
								<p:outputLabel for="telefone"
									value="#{messages['pessoaJuridica.telefone']}" />
								<p:inputMask mask="(99) 9 9999-9999" id="telefone"
									styleClass="form-control"
									value="#{gerenciarPessoaJuridicaMB.pessoaJuridica.telefone}"
									required="true" />
								<!-- <p:message for="telefone" /> -->
							</div>

							<div class="form-group">
								<p:outputLabel for="email"
									value="#{messages['pessoaJuridica.email']}" />
								<p:inputText id="email" styleClass="form-control"
									value="#{gerenciarPessoaJuridicaMB.pessoaJuridica.email}"
									required="true" />
								<!-- <p:message for="email" /> -->
							</div>

							<div class="form-group">
								<p:outputLabel for="cnpj"
									value="#{messages['pessoaJuridica.cnpj']}" />
								<p:inputMask mask="99.999.999/9999-99" id="cnpj"
									styleClass="form-control"
									value="#{gerenciarPessoaJuridicaMB.pessoaJuridica.cnpj}"
									required="true" />
								<!-- <p:message for="cnpj" /> -->
							</div>

							<div class="form-group">
								<p:outputLabel for="razaoSocial"
									value="#{messages['pessoaJuridica.razaoSocial']}" />
								<p:inputText id="razaoSocial" styleClass="form-control"
									value="#{gerenciarPessoaJuridicaMB.pessoaJuridica.razaoSocial}"
									required="true" />
								<!-- <p:message for="razaoSocial" /> -->
							</div>

							<div class="form-group">
								<p:outputLabel for="inscricaoEstadual"
									value="#{messages['pessoaJuridica.inscricaoEstadual']}" />
								<p:inputText id="inscricaoEstadual" styleClass="form-control"
									value="#{gerenciarPessoaJuridicaMB.pessoaJuridica.inscricaoEstadual}"
									required="true" />
								<!-- <p:message for="inscricaoEstadual" /> -->
							</div>

							<div class="form-group">
								<p:outputLabel for="inscricaoMunicipal"
									value="#{messages['pessoaJuridica.inscricaoMunicipal']}" />
								<p:inputText id="inscricaoMunicipal" styleClass="form-control"
									value="#{gerenciarPessoaJuridicaMB.pessoaJuridica.inscricaoMunicipal}"
									required="true" />
								<!-- <p:message for="inscricaoMunicipal" /> -->
							</div>

							<p:commandButton value="#{messages['clean']}"
								action="#{gerenciarPessoaJuridicaMB.limpa}"
								styleClass="btn btn-default" ajax="false" style="border: none;"
								immediate="true" />

							<h:commandButton value="Salvar"
								action="#{gerenciarPessoaJuridicaMB.salva}"
								styleClass="btn btn-primary pull-right">

							</h:commandButton>
						</div>

						<div class="box-footer">


							<!-- Tentativa de Filtragem e paginação -->					
								<p:dataTable var="_pessoaJuridica" id="tb-pessoaJuridicas"
									filteredValue="#{gerenciarPessoaJuridicaMB.pessoaJuridicasFiltradas}"
									value="#{gerenciarPessoaJuridicaMB.pessoaJuridicas}"
									widgetVar="pjTable" rows="10" paginator="true"
									paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
									rowsPerPageTemplate="5,10,15">

									<h:panelGroup
										rendered="#{empty gerenciarPessoaJuridicaMB.pessoaJuridica}">
										<em><p:outputLabel value="#{messages['users.empty']}" />.</em>
									</h:panelGroup>
							
									<p:column filterBy="#{_pessoaJuridica.razaoSocial}"	headerText="Razão Social" filterMatchMode="contains">
										<h:outputText value="#{_pessoaJuridica.razaoSocial}" />
									</p:column>

									<p:column headerText="CNPJ" filterMatchMode="contains">
									<h:outputText filterBy="#{_pessoaJuridica.cnpj}"  />
										<h:outputText value="#{_pessoaJuridica.cnpj}" >
										<f:converter converterId="converter.cnpjConverter" />
										</h:outputText>
									</p:column>
														
									<p:column headerText="Ações">
										<!-- EDITA -->
										<h:commandButton value="#{messages['edit']}" immediate="true"
											styleClass="btn btn-default"
											action="#{gerenciarPessoaJuridicaMB.edita(_pessoaJuridica)}"
											update="form-pessoaJuridica">
											<p:ajax update=":mainForm:user-content" />
										</h:commandButton>

										<!-- EXCLUI -->
										<h:commandLink value="#{messages['delete']}" immediate="true" styleClass="btn btn-default"
											action="#{gerenciarPessoaJuridicaMB.exclui}" ajax="true" update="tb-pessoaJuridicas">									
											<f:setPropertyActionListener value="#{_pessoaJuridica}"
												target="#{gerenciarPessoaJuridicaMB.pessoaJuridica}" />
										</h:commandLink>
									</p:column>
									<f:facet name="paginatorTopLeft">
										<p:commandButton type="button" icon="fa fa-sync" />
									</f:facet>

									<f:facet name="paginatorBottomRight">
										<p:commandButton type="button" icon="fa fa-cloud-upload" />
									</f:facet>

								</p:dataTable>

							<!-- Fim Tentativa de Filtragem e paginação-->

						</div>

					</div>
					<!-- /.box -->
				</h:panelGroup>
			</section>
			<!-- /.content -->
		</div>

	</ui:define>
</ui:composition>

